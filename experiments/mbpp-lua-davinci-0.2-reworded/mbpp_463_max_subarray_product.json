{
  "name": "mbpp_463_max_subarray_product",
  "language": "lua",
  "prompt": "-- Write a function to find the maximum product subtable of the given table.\nlocal function max_subarray_product(arr)\n",
  "doctests": "transform",
  "original": "/home/arjun/repos/MultiPL-E/datasets/../datasets/mbpp-typed/mbpp_463_max_subarray_product.py",
  "prompt_terminology": "reworded",
  "tests": "lu = require('luaunit')\n\nfunction test_humaneval()\nlocal candidate = max_subarray_product\n    lu.assertEquals(candidate({1, -2, -3, 0, 7, -8, -2}), 112)\n    lu.assertEquals(candidate({6, -3, -10, 0, 2}), 180)\n    lu.assertEquals(candidate({-2, -40, 0, -2, -3}), 80)\nend\n\nos.exit(lu.LuaUnit.run())",
  "stop_tokens": [
    "\nlocal",
    "\nfunction",
    "\n--",
    "\n\n"
  ],
  "completions": [
    "  local max_product = arr[1]\n  local min_product = arr[1]\n  local max_so_far = arr[1]",
    "  local max_ending_here = 1\n  local min_ending_here = 1\n  local max_so_far = 1\n  for i, v in ipairs(arr) do\n    if v > 0 then\n      max_ending_here = max_ending_here * v\n      min_ending_here = math.min(min_ending_here * v, 1)\n    elseif v == 0 then\n      max_ending_here = 1\n      min_ending_here = 1\n    else\n      local tmp = max_ending_here\n      max_ending_here = math.max(min_ending_here * v, 1)\n      min_ending_here = tmp * v\n    end\n    if max_so_far < max_ending_here then\n      max_so_far = max_ending_here\n    end\n  end\n  return max_so_far\nend",
    "  local max_ending_here = 1\n  local min_ending_here = 1\n  local max_so_far = 1\n  local n = #arr\n  for i = 1, n do\n    if arr[i] > 0 then\n      max_ending_here = max_ending_here * arr[i]\n      min_ending_here = math.min(min_ending_here * arr[i], 1)\n    elseif arr[i] == 0 then\n      max_ending_here = 1\n      min_ending_here = 1\n    else\n      local temp = max_ending_here\n      max_ending_here = math.max(min_ending_here * arr[i], 1)\n      min_ending_here = temp * arr[i]\n    end\n    if max_so_far < max_ending_here then\n      max_so_far = max_ending_here\n    end\n  end\n  return max_so_far\nend",
    "  local max_ending_here = 1\n  local min_ending_here = 1\n  local max_so_far = 1\n  for i = 1, #arr do\n    if arr[i] > 0 then\n      max_ending_here = max_ending_here * arr[i]\n      min_ending_here = math.min(min_ending_here * arr[i], 1)\n    elseif arr[i] == 0 then\n      max_ending_here = 1\n      min_ending_here = 1\n    else\n      local temp = max_ending_here\n      max_ending_here = math.max(min_ending_here * arr[i], 1)\n      min_ending_here = temp * arr[i]\n    end\n    if max_so_far < max_ending_here then\n      max_so_far = max_ending_here\n    end\n  end\n  return max_so_far\nend",
    "    local max_ending_here = 1\n    local min_ending_here = 1\n    local max_so_far = 1\n    for _, v in ipairs(arr) do\n        if v > 0 then\n            max_ending_here = max_ending_here * v\n            min_ending_here = math.min(min_ending_here * v, 1)\n        elseif v == 0 then\n            max_ending_here = 1\n            min_ending_here = 1\n        else\n            local tmp = max_ending_here\n            max_ending_here = math.max(min_ending_here * v, 1)\n            min_ending_here = tmp * v\n        end\n        if max_so_far < max_ending_here then\n            max_so_far = max_ending_here\n        end\n    end\n    return max_so_far\nend",
    "  local max_ending_here = 1\n  local min_ending_here = 1\n  local max_so_far = 1\n  for i = 1, #arr do\n    if arr[i] > 0 then\n      max_ending_here = max_ending_here * arr[i]\n      min_ending_here = math.min(min_ending_here * arr[i], 1)\n    elseif arr[i] == 0 then\n      max_ending_here = 1\n      min_ending_here = 1\n    else\n      local temp = max_ending_here\n      max_ending_here = math.max(min_ending_here * arr[i], 1)\n      min_ending_here = temp * arr[i]\n    end\n    if max_so_far < max_ending_here then\n      max_so_far = max_ending_here\n    end\n  end\n  return max_so_far\nend",
    "  local max_ending_here = 1\n  local min_ending_here = 1\n  local max_so_far = 1\n  for i = 1, #arr do\n    if arr[i] > 0 then\n      max_ending_here = max_ending_here * arr[i]\n      min_ending_here = min(min_ending_here * arr[i], 1)\n    elseif arr[i] == 0 then\n      max_ending_here = 1\n      min_ending_here = 1\n    else\n      local temp = max_ending_here\n      max_ending_here = max(min_ending_here * arr[i], 1)\n      min_ending_here = temp * arr[i]\n    end\n    if max_so_far < max_ending_here then\n      max_so_far = max_ending_here\n    end\n  end\n  return max_so_far\nend",
    "  local max_ending_here = 1\n  local min_ending_here = 1\n  local max_so_far = 1\n  for i = 1, #arr do\n    if arr[i] > 0 then\n      max_ending_here = max_ending_here * arr[i]\n      min_ending_here = math.min(min_ending_here * arr[i], 1)\n    elseif arr[i] == 0 then\n      max_ending_here = 1\n      min_ending_here = 1\n    else\n      local temp = max_ending_here\n      max_ending_here = math.max(min_ending_here * arr[i], 1)\n      min_ending_here = temp * arr[i]\n    end\n    if max_so_far < max_ending_here then\n      max_so_far = max_ending_here\n    end\n  end\n  return max_so_far\nend",
    "  local max_ending_here = 1\n  local min_ending_here = 1\n  local max_so_far = 1\n  for i = 1, #arr do\n    if arr[i] > 0 then\n      max_ending_here = max_ending_here * arr[i]\n      min_ending_here = math.min(min_ending_here * arr[i], 1)\n    elseif arr[i] == 0 then\n      max_ending_here = 1\n      min_ending_here = 1\n    else\n      local temp = max_ending_here\n      max_ending_here = math.max(min_ending_here * arr[i], 1)\n      min_ending_here = temp * arr[i]\n    end\n    if max_so_far < max_ending_here then\n      max_so_far = max_ending_here\n    end\n  end\n  return max_so_far\nend",
    "  local max_ending_here = 1\n  local min_ending_here = 1\n  local max_so_far = 1\n  for i = 1, #arr do\n    if arr[i] > 0 then\n      max_ending_here = max_ending_here * arr[i]\n      min_ending_here = math.min(min_ending_here * arr[i], 1)\n    elseif arr[i] == 0 then\n      max_ending_here = 1\n      min_ending_here = 1\n    else\n      local temp = max_ending_here\n      max_ending_here = math.max(min_ending_here * arr[i], 1)\n      min_ending_here = temp * arr[i]\n    end\n    if max_so_far < max_ending_here then\n      max_so_far = max_ending_here\n    end\n  end\n  return max_so_far\nend",
    "  local max_ending_here = 1\n  local min_ending_here = 1\n  local max_so_far = 1\n  for i, v in ipairs(arr) do\n    if v > 0 then\n      max_ending_here = max_ending_here * v\n      min_ending_here = math.min(min_ending_here * v, 1)\n    elseif v == 0 then\n      max_ending_here = 1\n      min_ending_here = 1\n    else\n      local tmp = max_ending_here\n      max_ending_here = math.max(min_ending_here * v, 1)\n      min_ending_here = tmp * v\n    end\n    if max_so_far < max_ending_here then\n      max_so_far = max_ending_here\n    end\n  end\n  return max_so_far\nend",
    "    local max_ending_here = 1\n    local min_ending_here = 1\n    local max_so_far = 1\n    for i = 1, #arr do\n        if arr[i] > 0 then\n            max_ending_here = max_ending_here * arr[i]\n            min_ending_here = math.min(min_ending_here * arr[i], 1)\n        elseif arr[i] == 0 then\n            max_ending_here = 1\n            min_ending_here = 1\n        else\n            local temp = max_ending_here\n            max_ending_here = math.max(min_ending_here * arr[i], 1)\n            min_ending_here = temp * arr[i]\n        end\n        if max_so_far < max_ending_here then\n            max_so_far = max_ending_here\n        end\n    end\n    return max_so_far\nend",
    "  local max_ending_here = 1\n  local min_ending_here = 1\n  local max_so_far = 1\n  for i = 1, #arr do\n    if arr[i] > 0 then\n      max_ending_here = max_ending_here * arr[i]\n      min_ending_here = math.min(min_ending_here * arr[i], 1)\n    elseif arr[i] == 0 then\n      max_ending_here = 1\n      min_ending_here = 1\n    else\n      local temp = max_ending_here\n      max_ending_here = math.max(min_ending_here * arr[i], 1)\n      min_ending_here = temp * arr[i]\n    end\n    if max_so_far < max_ending_here then\n      max_so_far = max_ending_here\n    end\n  end\n  return max_so_far\nend",
    "    local max_ending_here = 1\n    local min_ending_here = 1\n    local max_so_far = 1\n    for i = 1, #arr do\n        if arr[i] > 0 then\n            max_ending_here = max_ending_here * arr[i]\n            min_ending_here = min(min_ending_here * arr[i], 1)\n        elseif arr[i] == 0 then\n            max_ending_here = 1\n            min_ending_here = 1\n        else\n            local temp = max_ending_here\n            max_ending_here = max(min_ending_here * arr[i], 1)\n            min_ending_here = temp * arr[i]\n        end\n        if max_so_far < max_ending_here then\n            max_so_far = max_ending_here\n        end\n    end\n    return max_so_far\nend",
    "  local max_ending_here = 1\n  local min_ending_here = 1\n  local max_so_far = 1\n  for i = 1, #arr do\n    if arr[i] > 0 then\n      max_ending_here = max_ending_here * arr[i]\n      min_ending_here = math.min(min_ending_here * arr[i], 1)\n    elseif arr[i] == 0 then\n      max_ending_here = 1\n      min_ending_here = 1\n    else\n      local temp = max_ending_here\n      max_ending_here = math.max(min_ending_here * arr[i], 1)\n      min_ending_here = temp * arr[i]\n    end\n    if max_so_far < max_ending_here then\n      max_so_far = max_ending_here\n    end\n  end\n  return max_so_far\nend",
    "  local max_ending_here = 1\n  local min_ending_here = 1\n  local max_so_far = 1\n  for i = 1, #arr do\n    if arr[i] > 0 then\n      max_ending_here = max_ending_here * arr[i]\n      min_ending_here = math.min(min_ending_here * arr[i], 1)\n    elseif arr[i] == 0 then\n      max_ending_here = 1\n      min_ending_here = 1\n    else\n      local temp = max_ending_here\n      max_ending_here = math.max(min_ending_here * arr[i], 1)\n      min_ending_here = temp * arr[i]\n    end\n    if max_so_far < max_ending_here then\n      max_so_far = max_ending_here\n    end\n  end\n  return max_so_far\nend",
    "  local max_ending_here = 1\n  local min_ending_here = 1\n  local max_so_far = 1\n  for i = 1, #arr do\n    if arr[i] > 0 then\n      max_ending_here = max_ending_here * arr[i]\n      min_ending_here = math.min(min_ending_here * arr[i], 1)\n    elseif arr[i] == 0 then\n      max_ending_here = 1\n      min_ending_here = 1\n    else\n      local tmp = max_ending_here\n      max_ending_here = math.max(min_ending_here * arr[i], 1)\n      min_ending_here = tmp * arr[i]\n    end\n    if max_so_far < max_ending_here then\n      max_so_far = max_ending_here\n    end\n  end\n  return max_so_far\nend",
    "  local max_ending_here = 1\n  local min_ending_here = 1\n  local max_so_far = 1",
    "    local max_ending_here = 1\n    local min_ending_here = 1\n    local max_so_far = 1\n    for i = 1, #arr do\n        if arr[i] > 0 then\n            max_ending_here = max_ending_here * arr[i]\n            min_ending_here = min(min_ending_here * arr[i], 1)\n        elseif arr[i] == 0 then\n            max_ending_here = 1\n            min_ending_here = 1\n        else\n            local temp = max_ending_here\n            max_ending_here = max(min_ending_here * arr[i], 1)\n            min_ending_here = temp * arr[i]\n        end\n        if max_so_far < max_ending_here then\n            max_so_far = max_ending_here\n        end\n    end\n    return max_so_far\nend",
    "  local max_ending_here = 1\n  local min_ending_here = 1\n  local max_so_far = 1\n  for i = 1, #arr do\n    if arr[i] > 0 then\n      max_ending_here = max_ending_here * arr[i]\n      min_ending_here = math.min(min_ending_here * arr[i], 1)\n    elseif arr[i] == 0 then\n      max_ending_here = 1\n      min_ending_here = 1\n    else\n      local temp = max_ending_here\n      max_ending_here = math.max(min_ending_here * arr[i], 1)\n      min_ending_here = temp * arr[i]\n    end\n    if max_so_far < max_ending_here then\n      max_so_far = max_ending_here\n    end\n  end\n  return max_so_far\nend"
  ]
}