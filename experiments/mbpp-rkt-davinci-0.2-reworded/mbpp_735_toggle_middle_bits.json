{
  "name": "mbpp_735_toggle_middle_bits",
  "language": "rkt",
  "prompt": "#lang racket\n\n;; Write a rktthon function to toggle bits of the number except the first and the last bit. https://www.geeksforgeeks.org/toggle-bits-number-expect-first-last-bits/\n(define (toggle_middle_bits n)\n",
  "doctests": "transform",
  "original": "/home/arjun/repos/MultiPL-E/datasets/../datasets/mbpp-typed/mbpp_735_toggle_middle_bits.py",
  "prompt_terminology": "reworded",
  "tests": "(require rackunit)\n\n(define (test-humaneval) \n\n  (let (( candidate toggle_middle_bits))\n    (check-equal? (candidate 9) 15)\n    (check-equal? (candidate 10) 12)\n    (check-equal? (candidate 11) 13)\n    (check-equal? (candidate 65) 127)\n    (check-equal? (candidate 77) 115)\n))\n\n(test-humaneval)",
  "stop_tokens": [
    "\n(define ",
    "\n#|",
    "\n;",
    "\n("
  ],
  "completions": [
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1)))\n",
    "  (define (toggle_middle_bits_iter n i)\n    (cond\n      [(= i 1) n]\n      [(= i 32) n]\n      [else (toggle_middle_bits_iter (bitwise-xor n (bitwise-shift-left 1 (- i 2))) (- i 1))]))\n  (toggle_middle_bits_iter n 31))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1) (bitwise-arithmetic-shift n 1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1) (bitwise-arithmetic-shift n 1)))\n",
    "  (bitwise-xor n (bitwise-rotate-bit-field n 1 (- (bit-length n) 2))))\n",
    "  (let ([mask (bitwise-ior (bitwise-not (bitwise-shift-left 1 (bit-length n))) (bitwise-not 1))])\n    (bitwise-xor n mask)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1) (bitwise-arithmetic-shift n 1)))\n",
    "  (define (toggle-middle-bits-iter n mask)\n    (if (= mask 0)\n        n\n        (toggle-middle-bits-iter (bitwise-xor n mask) (bitwise-arithmetic-shift mask -1))))\n  (toggle-middle-bits-iter n (bitwise-arithmetic-shift (bitwise-arithmetic-shift -1 -1) 2)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1)))\n",
    "  (let ([mask (bitwise-ior (bitwise-shift-left 1 (- (bit-length n) 2)) (bitwise-shift-left 1 1))])\n    (bitwise-xor n mask)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1) (bitwise-arithmetic-shift n 1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1)))\n",
    "  (bitwise-xor n (bitwise-rotate-bit-field n 1 (- (bit-length n) 2))))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1) (bitwise-arithmetic-shift n 1)))\n",
    "  (define (toggle_middle_bits_helper n i)\n    (cond\n      [(= i 0) n]\n      [(= i 1) n]\n      [(= i (bit-length n)) n]\n      [else (toggle_middle_bits_helper (bitwise-xor n (ash 1 (- i 1))) (- i 1))]))\n  (toggle_middle_bits_helper n (- (bit-length n) 1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1)))\n",
    "  (define (toggle_middle_bits_helper n i)\n    (cond ((= i 0) n)\n          ((= i 1) n)\n          ((= i (- (bit-length n) 1)) n)\n          (else (toggle_middle_bits_helper (bitwise-xor n (ash 1 (- i 1))) (- i 1)))))\n  (toggle_middle_bits_helper n (- (bit-length n) 1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1) (bitwise-arithmetic-shift n 1)))\n",
    "  (define (toggle_middle_bits_helper n i)\n    (if (= i 0)\n        n\n        (let* ([mask (bitwise-bit-set 0 i)]\n               [new-n (bitwise-xor n mask)])\n          (toggle_middle_bits_helper new-n (- i 1)))))\n  (toggle_middle_bits_helper n (- (bit-length n) 2)))\n",
    "  (define (toggle-bit n i)\n    (bitwise-xor n (bitwise-shift-left 1 i)))\n  (define (toggle-bits n i j)\n    (if (= i j)\n        (toggle-bit n i)\n        (begin\n          (toggle-bits (toggle-bit n i) (+ i 1) j))))\n  (toggle-bits n 1 (- (bit-length n) 2)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1) (bitwise-arithmetic-shift n 1)))\n",
    "  (let ([mask #b111111110])\n    (bitwise-xor n mask)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1) (bitwise-arithmetic-shift n 1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1) (bitwise-arithmetic-shift n 1)))\n",
    "  (define (toggle_middle_bits_iter n i)\n    (cond\n      [(= i 1) n]\n      [(= i (bitwise-count n)) n]\n      [else (bitwise-ior (bitwise-xor n (bitwise-arithmetic-shift 1 i)) (toggle_middle_bits_iter n (+ i 1)))]))\n  (toggle_middle_bits_iter n 1))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1) (bitwise-arithmetic-shift n 1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1) (bitwise-arithmetic-shift n 1)))\n",
    "  (define (toggle_middle_bits_helper n i)\n    (cond\n      [(= i 1) n]\n      [(= i 0) n]\n      [else (bitwise-xor n (bitwise-shift-left 1 (- i 1)))]))\n  (define (get_bit n i)\n    (bitwise-and (bitwise-shift-right n (- i 1)) 1))\n  (define (set_bit n i b)\n    (cond\n      [(= b 1) (bitwise-or n (bitwise-shift-left 1 (- i 1)))]\n      [else (bitwise-and n (bitwise-not (bitwise-shift-left 1 (- i 1))))]))\n  (define (toggle_middle_bits_helper n i)\n    (cond\n      [(= i 1) n]\n      [(= i 0) n]\n      [else (bitwise-xor n (bitwise-shift-left 1 (- i 1)))]))\n  (define (get_bit n i)\n    (bitwise-and (bitwise-shift-right n (- i 1)) 1))\n  (define (set_bit n i b)\n    (cond\n      [(= b 1) (bitwise-or n (bitwise-shift-left 1 (- i 1)))]\n      [else (bitwise-and n (bitwise-not (bitwise-shift-left 1 (- i 1))))]))\n  (define (toggle_middle_bits_helper n i)\n    (cond\n      [(= i 1) n]\n      [(= i 0) n]\n      [else (bitwise-xor n (bitwise-shift-left 1 (- i 1)))]))\n  (define (get_bit n i)\n    (bitwise-and (bitwise-shift-right n (- i 1)) 1))\n  (define (set_bit n i b)\n    (cond\n      [(= b 1) (bitwise-or n (bitwise-shift-left 1 (- i 1)))]\n      [else (bitwise-and n (bitwise-not (bitwise-shift-left 1 (- i 1))))]))\n  (define (toggle_middle_bits_helper n",
    "  (bitwise-xor n (bitwise-rotate-bit-field n 1 (- (bit-length n) 2))))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1)))\n",
    "  (let ([mask (bitwise-ior (bitwise-not (bitwise-shift-left 1 (bitwise-arithmetic-shift-right n 1))) 1)])\n    (bitwise-xor n mask)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1) (bitwise-arithmetic-shift n 1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1)))\n",
    "  (define (toggle_middle_bits_helper n i)\n    (if (= i 0)\n        n\n        (if (= i 1)\n            (toggle_middle_bits_helper n (- i 1))\n            (if (= i (- (bit-length n) 1))\n                (toggle_middle_bits_helper n (- i 1))\n                (toggle_middle_bits_helper (bitwise-xor n (ash 1 (- i 1))) (- i 1))))))\n  (toggle_middle_bits_helper n (- (bit-length n) 1)))\n",
    "  (bitwise-ior (bitwise-and n -2) (bitwise-and n -4)))\n",
    "  (let ([mask (bitwise-ior (bitwise-not (bitwise-shift-left 1 (bitwise-arithmetic-shift-right n 1))) 1)])\n    (bitwise-xor n mask)))\n",
    "  (bitwise-xor n (bitwise-shift-left 1 (- (bitwise-not n) 2))))\n",
    "  (define (toggle-bit n i)\n    (bitwise-xor n (bitwise-shift-left 1 i)))\n  (define (toggle-bits n i)\n    (if (= i (- (bit-length n) 2))\n        n\n        (toggle-bits (toggle-bit n i) (+ i 1))))\n  (toggle-bits n 1))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1) (bitwise-arithmetic-shift n 1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1)))\n",
    "  (bitwise-xor n (bitwise-rotate-bit-field n 1 (- (bit-length n) 2))))\n",
    "  (bitwise-xor n (bitwise-rotate-bit-field n 1 (- (bit-length n) 2))))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1) (bitwise-arithmetic-shift n 1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1) (bitwise-arithmetic-shift n 1)))\n",
    "  (bitwise-xor n (bitwise-rotate-bit-field n 1 (- (bit-length n) 2))))\n",
    "  (define (toggle_middle_bits_helper n mask)\n    (if (= mask 0)\n        n\n        (toggle_middle_bits_helper (bitwise-xor n mask) (bitwise-arithmetic-shift mask -1))))\n  (toggle_middle_bits_helper n (bitwise-arithmetic-shift (bitwise-arithmetic-shift -1 -1) 1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1) (bitwise-arithmetic-shift n 1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1) (bitwise-arithmetic-shift n 1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1) (bitwise-arithmetic-shift n 1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1) (bitwise-arithmetic-shift n 1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1) (bitwise-arithmetic-shift n 1)))\n",
    "  (let ([mask (bitwise-ior (bitwise-not (bitwise-shift-left 1 (bitwise-arithmetic-shift-right n 1))) 1)])\n    (bitwise-xor n mask)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1) (bitwise-arithmetic-shift n 1)))\n",
    "  (define (toggle_middle_bits_helper n acc)\n    (if (zero? n)\n        acc\n        (toggle_middle_bits_helper (quotient n 2) (+ (remainder n 2) (* acc 2)))))\n  (toggle_middle_bits_helper n 0))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1) (bitwise-arithmetic-shift n 1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1) (bitwise-arithmetic-shift n 1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1) (bitwise-arithmetic-shift n 1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1) (bitwise-arithmetic-shift n 1)))\n",
    "  (bitwise-xor n (bitwise-rotate-bit-field n 1 (- (bit-length n) 2))))\n",
    "  (bitwise-xor n (bitwise-rotate-bit-field n 1 (- (bit-length n) 2))))\n",
    "  (let ([mask (bitwise-ior (bitwise-shift-left 1 (sub1 (integer-length n))) 1)])\n    (bitwise-xor n mask)))\n",
    "  (define (toggle-bit n i)\n    (bitwise-xor n (bitwise-shift-left 1 i)))\n  (define (toggle-middle-bits n i)\n    (cond [(= i 1) n]\n          [(= i (- (bit-length n) 2)) n]\n          [else (toggle-middle-bits (toggle-bit n i) (- i 1))]))\n  (toggle-middle-bits n (- (bit-length n) 2)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1) (bitwise-arithmetic-shift n 1)))\n",
    "  (define (toggle_middle_bits_iter n i)\n    (if (= i 0)\n        n\n        (toggle_middle_bits_iter (bitwise-xor n (bitwise-shift-left 1 i)) (- i 1))))\n  (toggle_middle_bits_iter n (- (bit-length n) 2)))\n",
    "  (define (toggle_middle_bits_helper n i)\n    (cond\n      [(= i 0) n]\n      [(= i 1) n]\n      [(= i 2) n]\n      [(= i 3) n]\n      [(= i 4) n]\n      [(= i 5) n]\n      [(= i 6) n]\n      [(= i 7) n]\n      [(= i 8) n]\n      [(= i 9) n]\n      [(= i 10) n]\n      [(= i 11) n]\n      [(= i 12) n]\n      [(= i 13) n]\n      [(= i 14) n]\n      [(= i 15) n]\n      [(= i 16) n]\n      [(= i 17) n]\n      [(= i 18) n]\n      [(= i 19) n]\n      [(= i 20) n]\n      [(= i 21) n]\n      [(= i 22) n]\n      [(= i 23) n]\n      [(= i 24) n]\n      [(= i 25) n]\n      [(= i 26) n]\n      [(= i 27) n]\n      [(= i 28) n]\n      [(= i 29) n]\n      [(= i 30) n]\n      [(= i 31) n]\n      [else (toggle_middle_bits_helper (bitwise-xor n (ash 1 i)) (- i 1))]))\n  (toggle_middle_bits_helper n 31))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1)))\n",
    "  (let ([mask (bitwise-ior (bitwise-shift-left 1 (- (bit-length n) 2)) (bitwise-shift-left 1 1))])\n    (bitwise-xor n mask)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1)))\n",
    "  (define (helper n i)\n    (if (= i 0)\n        n\n        (helper (bitwise-xor n (bitwise-shift-left 1 i)) (- i 1))))\n  (helper n (- (bit-length n) 2)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1)))\n",
    "  (define (toggle_middle_bits_helper n)\n    (if (zero? n)\n        0\n        (let* ([first-bit (modulo n 2)]\n               [rest (quotient n 2)])\n          (+ (* first-bit (expt 2 (sub1 (toggle_middle_bits_helper rest))))\n             (toggle_middle_bits_helper rest)))))\n  (toggle_middle_bits_helper n))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1) (bitwise-arithmetic-shift n 1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1) (bitwise-arithmetic-shift n 1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1) (bitwise-arithmetic-shift n 1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1) (bitwise-arithmetic-shift n 1)))\n",
    "  (define (toggle-bit n i)\n    (bitwise-xor n (bitwise-shift-left 1 i)))\n  (define (toggle-bits n i j)\n    (if (&gt; i j)\n        n\n        (toggle-bits (toggle-bit n i) (+ i 1) j)))\n  (toggle-bits n 1 (- (bit-length n) 2)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1) (bitwise-arithmetic-shift n 1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1) (bitwise-arithmetic-shift n 1)))\n",
    "  (bitwise-ior (bitwise-and n -2) (bitwise-not (bitwise-and n -4))))\n",
    "  (define (toggle_middle_bits_helper n mask)\n    (cond\n      [(zero? mask) n]\n      [else (toggle_middle_bits_helper (bitwise-xor n mask) (bitwise-shift-right mask 1))]))\n  (toggle_middle_bits_helper n (bitwise-shift-left 1 (- (bit-length n) 2))))\n",
    "  (define (toggle_middle_bits_helper n mask)\n    (if (= mask 0)\n        n\n        (toggle_middle_bits_helper (bitwise-xor n mask) (bitwise-shift-right mask 1))))\n  (toggle_middle_bits_helper n (bitwise-shift-left 1 (- (bit-length n) 2))))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1)))\n",
    "  (let ([mask (bitwise-ior (bitwise-shift-left 1 (- (bit-length n) 2)) (bitwise-shift-left 1 1))])\n    (bitwise-xor n mask)))\n",
    "  (let ([mask (bitwise-ior (bitwise-not (bitwise-shift-left 1 (bitwise-arithmetic-shift-right n 1))) 1)])\n    (bitwise-xor n mask)))\n",
    "  (define (toggle_middle_bits_helper n i)\n    (cond [(= i 0) n]\n          [(= i 1) n]\n          [(= i (- (bit-length n) 1)) n]\n          [else (toggle_middle_bits_helper (bitwise-xor n (ash 1 (- i 1))) (- i 1))]))\n  (toggle_middle_bits_helper n (- (bit-length n) 1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1)))\n",
    "  (define (toggle_middle_bits-helper n mask)\n    (if (= mask 0)\n        n\n        (toggle_middle_bits-helper (bitwise-xor n mask) (bitwise-arithmetic-shift mask -1))))\n  (toggle_middle_bits-helper n (bitwise-arithmetic-shift 1 (- (bit-length n) 2))))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1) (bitwise-arithmetic-shift n 1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1) (bitwise-arithmetic-shift n 1)))\n",
    "  (define (toggle_middle_bits_helper n mask)\n    (if (= mask 0)\n        n\n        (toggle_middle_bits_helper (bitwise-xor n mask) (bitwise-shift-right mask 1))))\n  (toggle_middle_bits_helper n (bitwise-shift-left 1 (- (bit-length n) 2))))\n",
    "  (let ([mask (bitwise-ior (bitwise-shift-left 1 (- (bit-length n) 2)) (bitwise-shift-left 1 1))])\n    (bitwise-xor n mask)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1) (bitwise-arithmetic-shift n 1)))\n",
    "  (define (toggle-bit n i)\n    (bitwise-xor n (bitwise-shift-left 1 i)))\n  (define (toggle-bits n i j)\n    (define (iter n i j)\n      (if (&lt;= i j)\n          (iter (toggle-bit n i) (+ i 1) j)\n          n))\n    (iter n i j))\n  (toggle-bits n 1 (- (bit-length n) 2)))\n",
    "  (bitwise-xor n (bitwise-rotate-bit-field n 1 (- (bit-length n) 2))))\n",
    "  (let ([mask (bitwise-ior (bitwise-not (bitwise-shift-left 1 (sub1 (bit-length n)))) 1)])\n    (bitwise-xor n mask)))\n",
    "  (let ([mask (bitwise-ior (bitwise-arithmetic-shift-left -1 (sub1 (bit-length n))) 1)])\n    (bitwise-xor n mask)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1)))\n",
    "  (bitwise-xor n (bitwise-rotate-bit-field n 1 (- (bit-length n) 2))))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1) (bitwise-arithmetic-shift n 1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1)))\n",
    "  (define (toggle_middle_bits_iter n acc)\n    (cond\n      [(zero? n) acc]\n      [(zero? (remainder n 2)) (toggle_middle_bits_iter (quotient n 2) (add1 (add1 acc)))]\n      [else (toggle_middle_bits_iter (quotient n 2) (add1 acc))]))\n  (toggle_middle_bits_iter n 0))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1)))\n",
    "  (bitwise-xor n (bitwise-rotate-bit-field n 1 (- (bit-length n) 2))))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1) (bitwise-arithmetic-shift n 1)))\n",
    "  (bitwise-xor n (bitwise-rotate-bit-field n 1 (- (bit-length n) 2))))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1) (bitwise-arithmetic-shift n 1)))\n",
    "  (bitwise-xor n (bitwise-rotate-bit-field n 1 (- (bit-length n) 2))))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1)))\n",
    "  (let ([mask (bitwise-ior (bitwise-arithmetic-shift-left -1 31) 1)])\n    (bitwise-xor n mask)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1) (bitwise-arithmetic-shift n 1)))\n",
    "  (let ([mask (bitwise-ior (bitwise-shift-left 1 (sub1 (bit-length n))) (bitwise-shift-left 1 (sub1 (bit-length n))))])\n    (bitwise-xor n mask)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1) (bitwise-arithmetic-shift n 1)))\n",
    "  (define (toggle_middle_bits_helper n i)\n    (if (= i 0)\n        n\n        (toggle_middle_bits_helper (bitwise-xor n (bitwise-shift-left 1 i)) (- i 1))))\n  (toggle_middle_bits_helper n (- (bit-length n) 2)))\n",
    "  (bitwise-xor n (bitwise-rotate-bit-field n 1 (- (bit-length n) 2))))\n",
    "  (define (toggle_middle_bits_helper n mask)\n    (if (= mask 0)\n        n\n        (toggle_middle_bits_helper (bitwise-xor n mask) (bitwise-arithmetic-shift mask -1))))\n  (toggle_middle_bits_helper n (bitwise-arithmetic-shift (bitwise-arithmetic-shift n -1) 1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1) (bitwise-arithmetic-shift n 1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1) (bitwise-arithmetic-shift n 1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1) (bitwise-arithmetic-shift n 1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1) (bitwise-arithmetic-shift n 1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1) (bitwise-arithmetic-shift n 1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1)))\n",
    "  (define (toggle_middle_bits_iter n m)\n    (cond\n      [(zero? m) n]\n      [(zero? (remainder n 2))\n       (toggle_middle_bits_iter (bitwise-shift-right n 1) (sub1 m))]\n      [else\n       (toggle_middle_bits_iter (bitwise-ior (bitwise-shift-right n 1) (bitwise-shift-left 1 (sub1 m))) (sub1 m))]))\n  (toggle_middle_bits_iter n (sub1 (bit-length n))))\n",
    "  (define (toggle-bit n i)\n    (bitwise-xor n (bitwise-shift-left 1 i)))\n  (define (toggle-bits n i)\n    (if (= i (- (bit-length n) 1))\n        n\n        (toggle-bits (toggle-bit n i) (+ i 1))))\n  (toggle-bits n 1))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1) (bitwise-arithmetic-shift n 1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1) (bitwise-arithmetic-shift n 1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1)))\n",
    "  (bitwise-xor n (bitwise-rotate-bit-field n 1 (- (bit-length n) 2))))\n",
    "  (let loop ([n n] [mask #b11111110])\n    (if (= mask 0)\n        n\n        (loop (bitwise-xor n mask) (bitwise-arithmetic-shift mask -1)))))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1)))\n",
    "  (bitwise-xor n (bitwise-rotate-bit-field n 1 (- (bit-length n) 2))))\n",
    "  (define (toggle_middle_bits_helper n mask)\n    (cond\n      [(zero? mask) n]\n      [else (toggle_middle_bits_helper (bitwise-xor n mask) (bitwise-arithmetic-shift mask -1))]))\n  (toggle_middle_bits_helper n (bitwise-arithmetic-shift (bitwise-arithmetic-shift -1 -1) 1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1) (bitwise-arithmetic-shift n 1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1)))\n",
    "  (define (toggle_middle_bits_helper n i)\n    (cond\n      [(= i 0) n]\n      [(= i 1) n]\n      [(= i 2) (bitwise-xor n (bitwise-rotate-bit-field n 1 1))]\n      [else (toggle_middle_bits_helper (bitwise-xor n (bitwise-rotate-bit-field n 1 i)) (- i 1))]))\n  (toggle_middle_bits_helper n (- (bit-length n) 1)))\n",
    "  (define (toggle_middle_bits-iter n mask)\n    (if (zero? mask)\n        n\n        (toggle_middle_bits-iter (bitwise-xor n mask) (bitwise-shift-right mask 1))))\n  (toggle_middle_bits-iter n (bitwise-shift-left 1 (- (bit-length n) 2))))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1) (bitwise-arithmetic-shift n 1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1) (bitwise-arithmetic-shift n 1)))\n",
    "  (let ([mask (bitwise-ior (bitwise-shift-left 1 (- (bit-length n) 2)) (bitwise-shift-left 1 1))])\n    (bitwise-xor n mask)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1) (bitwise-arithmetic-shift n 1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1) (bitwise-arithmetic-shift n 1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1) (bitwise-arithmetic-shift n 1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1) (bitwise-arithmetic-shift n 1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1)))\n",
    "  (let* ([mask (bitwise-ior (bitwise-shift-left 1 (- (bit-length n) 2)) (bitwise-shift-left 1 2))]\n         [masked (bitwise-and n mask)])\n    (bitwise-xor n masked)))\n",
    "  (let ([mask (bitwise-ior (bitwise-shift-left 1 (- (bit-length n) 2))\n                           (bitwise-shift-left 1 1))])\n    (bitwise-xor n mask)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1)))\n",
    "  (let ([mask (bitwise-ior (bitwise-not (bitwise-arithmetic-shift-left 1 (bitwise-arithmetic-shift-right-logical n 1))) 1)])\n    (bitwise-xor n mask)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1) (bitwise-arithmetic-shift n 1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1)))\n",
    "  (bitwise-xor n (bitwise-arithmetic-shift n -1) (bitwise-arithmetic-shift n 1)))\n",
    "  (define (toggle_middle_bits_helper n)\n    (if (zero? n)\n        0\n        (bitwise-ior (bitwise-xor (bitwise-and n 1) 1) (bitwise-lshift (toggle_middle_bits_helper (bitwise-rshift n 1)) 1))))\n  (bitwise-ior (bitwise-and n 1) (bitwise-lshift (toggle_middle_bits_helper (bitwise-rshift (bitwise-and n (bitwise-not 1)) 1)) 1)))\n",
    "  (define (toggle-bit n i)\n    (bitwise-xor n (bitwise-shift-left 1 i)))\n  (define (toggle-bits n i j)\n    (if (= i j)\n        (toggle-bit n i)\n        (begin\n          (set! n (toggle-bit n i))\n          (set! n (toggle-bit n j))\n          (set! i (+ i 1))\n          (set! j (- j 1))\n          (toggle-bits n i j))))\n  (toggle-bits n 1 (- (bit-length n) 2)))\n"
  ]
}