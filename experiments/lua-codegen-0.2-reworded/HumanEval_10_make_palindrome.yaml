name: HumanEval_10_make_palindrome
language: lua
prompt: "-- Find the shortest palindrome that begins with a supplied string.\n-- Algorithm\
  \ idea is simple:\n-- - Find the longest postfix of supplied string that is a palindrome.\n\
  -- - Append to the end of the string reverse of a string prefix that comes before\
  \ the palindromic suffix.\n-- >>> make_palindrome('')\n-- ''\n-- >>> make_palindrome('cat')\n\
  -- 'catac'\n-- >>> make_palindrome('cata')\n-- 'catac'\nlocal function make_palindrome(string)\n"
tests: "lu = require('luaunit')\n\nfunction test_humaneval()\nlocal candidate = make_palindrome\n\
  \    lu.assertEquals(candidate(''), '')\n    lu.assertEquals(candidate('x'), 'x')\n\
  \    lu.assertEquals(candidate('xyz'), 'xyzyx')\n    lu.assertEquals(candidate('xyx'),\
  \ 'xyx')\n    lu.assertEquals(candidate('jerry'), 'jerryrrej')\nend\n\nos.exit(lu.LuaUnit.run())"
completions: ["    local max_len = math.inf\n    local max_len_index = 0\n    for\
    \ i = 1, #string, 2 do\n        if string:sub(string, i, i) == string:sub(string,\
    \ 1, i) then\n            if max_len > i then\n                max_len = i\n \
    \               max_len_index = i\n            end\n        end\n    end\n   \
    \ if max_len == math.inf then\n        return string\n    end\n    return string:sub(1,\
    \ max_len_index) .. string:sub(max_len_index + 1, #string)\nend", "    local max_len\
    \ = math.inf\n    local max_len_index = 1\n    local max_len_index_rev = 1\n \
    \   for i = 1, #string, 2 do\n        if string:sub(string, i, i) == string:sub(string,\
    \ 1, i) then\n            if max_len > i then\n                max_len = i\n \
    \               max_len_index = i\n                max_len_index_rev = string:sub(1,\
    \ i)\n            end\n        end\n    end\n    if max_len == math.inf then\n\
    \        return string\n    end\n    return string:sub(1, max_len_index) .. string:sub(max_len_index_rev,\
    \ max_len)\nend", "    local max_postfix = ''\n    local max_postfix_len = 0\n\
    \    for i = 1, #string, 2 do\n        if string:sub(string, i, i) == string:sub(string,\
    \ 1, i) then\n            max_postfix = string:sub(string, 1, i)\n           \
    \ max_postfix_len = i\n            break\n        end\n    end\n    if max_postfix_len\
    \ == 0 then\n        return string\n    end\n    local max_prefix = string:sub(string,\
    \ 1, max_postfix_len)\n    local max_prefix_len = max_postfix_len\n    for i =\
    \ max_postfix_len, 1, -1 do\n        if string:sub(string, i, i) == string:sub(string,\
    \ max_postfix_len, i) then\n            max_prefix = string:sub(string, max_postfix_len,\
    \ i)\n            max_prefix_len = i\n            break\n        end\n    end\n\
    \    return string:gsub(max_prefix, max_prefix:gsub(max_prefix, '', 1, 2), 1,\
    \ 2) .. string:gsub(max_postfix, max_postfix:gsub(max_postfix, '', 1, 2), 1, 2)\n\
    end", "    local max_len = math.inf\n    local max_len_postfix = ''\n    local\
    \ max_len_prefix = ''\n    for i = 1, #string, 2 do\n        if string[i] == string[i-1]\
    \ then\n            if max_len_postfix < i then\n                max_len_postfix\
    \ = i\n            end\n        elseif max_len_prefix < i then\n            max_len_prefix\
    \ = i\n        end\n    end\n    if max_len_postfix > 0 then\n        string =\
    \ string .. string[1, max_len_postfix] .. string[max_len_postfix+1, #string]\n\
    \    end\n    if max_len_prefix > 0 then\n        string = string[max_len_prefix+1,\
    \ #string] .. string[1, max_len_prefix]\n    end\n    return string\nend", " \
    \   local max_len = 1\n    local max_len_postfix = ''\n    local max_len_prefix\
    \ = ''\n    local i = 1\n    while i <= #string do\n        if string:sub(string,\
    \ i, i) == string:sub(string, 1, i) then\n            max_len = i\n          \
    \  max_len_postfix = string:sub(string, 1, i)\n            max_len_prefix = string:sub(string,\
    \ i, i)\n            break\n        i = i + 1\n    end\n    if max_len == 1 then\n\
    \        return string\n    end\n    return string:gsub(max_len_postfix, max_len_prefix:rev())\n\
    end", "    local max_len = math.inf\n    local max_palindrome = ''\n    for i\
    \ = 1, #string, 2 do\n        local palindrome = string[i] .. string[i-1] .. string[i+1]\
    \ .. string[i-2]\n        if palindrome == string and len(palindrome) > max_len\
    \ then\n            max_len = len(palindrome)\n            max_palindrome = palindrome\n\
    \        end\n    end\n    return max_palindrome\nend", "    local max_len = math.inf\n\
    \    local max_palindrome = ''\n    for i = 1, #string, 2 do\n        local palindrome\
    \ = string:sub(i, i)\n        if palindrome:len() > max_len then\n           \
    \ max_len = palindrome:len()\n            max_palindrome = palindrome\n      \
    \  end\n    end\n    return max_palindrome:reverse() .. max_palindrome\nend",
  "    local max_len = math.inf\n    local max_len_index = 1\n    local max_len_index_rev\
    \ = 1\n    for i = 1,#                                                       \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                           ",
  "    local max_len = math.inf\n    local max_len_index = 0\n    local max_len_string\
    \ = ''\n    for i = 1,#                                                      \
    \      ", "    local max_len = math.inf\n    local max_len_index = 1\n    local\
    \ max_len_index_rev = 1\n    for i = 1,#", "    local max_postfix = string:match('(.+)[^a-zA-Z]*$')\n\
    \    local max_postfix_palindrome = string:match('(.+)[^a-zA-Z]*$', max_postfix[1])\n\
    \    local max_postfix_palindrome_reverse = string:match('^(.+)[^a-zA-Z]*$', max_postfix_palindrome[1])\n\
    \    return string:gsub(max_postfix_palindrome_reverse, max_postfix_palindrome)\n\
    end", "    local max_len = math.inf\n    local max_len_index = 1\n    local max_len_string\
    \ = ''\n    for i = 1, #string, 2 do\n        if string:sub(string, i, i) == string:sub(string,\
    \ 1, i) then\n            if max_len > i then\n                max_len = i\n \
    \               max_len_index = i\n                max_len_string = string:sub(1,\
    \ i)\n            end\n        end\n    end\n    if max_len == math.inf then\n\
    \        return string\n    end\n    return string:gsub(max_len_string, 1, max_len_string:len())\n\
    end", "    local max_len = math.inf\n    local max_len_str = ''\n    local max_len_str_rev\
    \ = ''\n    local i = 1\n    while i <= #string do\n        local len = math.inf\n\
    \        local len_str = string[i]\n        local len_str_rev = string[i]\n  \
    \      while len_str == string[i-1] do\n            len = len + 1\n          \
    \  len_str = string[i+len]\n            len_str_rev = string[i-len]\n        if\
    \ len > max_len then\n            max_len = len\n            max_len_str = string[i-len+1]\n\
    \            max_len_str_rev = string[i-1]\n        end\n        i = i + 1\n \
    \   end\n    return max_len_str .. max_len_str_rev\nend", "    local max_len =\
    \ math.inf\n    local max_len_postfix = ''\n    local max_len_prefix = ''\n  \
    \  for i = 1, #string, 2 do\n        if string:sub(string, i, i) == string:sub(string,\
    \ 1, i) then\n            max_len = math.min(max_len, i)\n            max_len_postfix\
    \ = string:sub(string, 1, i)\n            max_len_prefix = string:sub(string,\
    \ i, i)\n        end\n    end\n    return max_len_postfix .. max_len_prefix\n\
    end", "    local max_len = math.inf\n    local max_len_index = 1\n    local max_len_index_index\
    \ = 1\n    local max_len_index_string = ''\n    local max_len_index_string_index\
    \ = 1\n    local max_len_index_string_string = ''\n    for i = 1,#           \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                                            \
    \                                                           ", "    local max_len\
    \ = math.inf\n    local max_len_postfix = ''\n    local max_len_prefix = ''\n\
    \    for i = 1, #string, 2 do\n        if string:sub(string, i, i) == string:sub(string,\
    \ 1, i) then\n            max_len = math.min(max_len, i)\n            max_len_postfix\
    \ = string:sub(string, 1, i)\n            max_len_prefix = string:sub(string,\
    \ i, i)\n        end\n    end\n    return max_len_postfix .. max_len_prefix\n\
    end", "    local longest_palindrome = ''\n    local longest_palindrome_length\
    \ = 0\n    local i = 1\n    while i <= #string do\n        local palindrome =\
    \ string:sub(i, i) .. string:sub(i, i)\n        if palindrome == string:sub(1,\
    \ #palindrome) then\n            if #palindrome > longest_palindrome_length then\n\
    \                longest_palindrome = palindrome\n                longest_palindrome_length\
    \ = #palindrome\n            end\n        end\n        i = i + 1\n    end\n  \
    \  return longest_palindrome\nend", "    local max_len = math.inf\n    local max_len_postfix\
    \ = ''\n    local max_len_prefix = ''\n    for i = 1, #string, 2 do\n        if\
    \ string:sub(string, i, i) == string:sub(string, 1, i) then\n            max_len\
    \ = math.min(max_len, i)\n            max_len_postfix = string:sub(string, 1,\
    \ i)\n            max_len_prefix = string:sub(string, i, i)\n        end\n   \
    \ end\n    return max_len_prefix .. max_len_postfix\nend", "    local max_len\
    \ = math.inf\n    local max_len_postfix = ''\n    local max_len_prefix = ''\n\
    \    for i = 1, #string, 2 do\n        if string[i] == string[i-1] then\n    \
    \        max_len = math.min(max_len, i)\n            max_len_postfix = string[i-max_len+1\
    \ .. i+1]\n            max_len_prefix = string[i-max_len .. i-1]\n        end\n\
    \    end\n    return max_len_prefix .. max_len_postfix\nend", "    local max_len\
    \ = math.inf\n    local max_palindrome = ''\n    for i = 1, #string, 2 do\n  \
    \      local palindrome = string:sub(i, i)\n        if palindrome:len() > max_len\
    \ then\n            max_len = palindrome:len()\n            max_palindrome = palindrome\n\
    \        end\n    end\n    return max_palindrome:reverse() .. max_palindrome\n\
    end"]
stop_tokens:
- "\nlocal"
- "\nfunction"
- "\n--"
- "\n\n"
